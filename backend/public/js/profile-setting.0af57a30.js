(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["profile-setting"],{ae98:function(t,r,s){"use strict";s.r(r);var e=function(){var t=this,r=t.$createElement,s=t._self._c||r;return s("v-container",{attrs:{fluid:""}},[s("v-row",{attrs:{"no-gutters":""}},[s("v-col",{attrs:{cols:"12"}},[s("v-form",{ref:"profileSettingForm",staticClass:"custom-form",on:{submit:function(r){return r.preventDefault(),t.saveProfileSetting(r)}}},[s("v-card",{attrs:{elevation:1,color:"gray lighten-4"}},[s("v-row",{attrs:{"no-gutters":""}},[s("v-col",{attrs:{cols:"12"}},[s("v-toolbar",{attrs:{color:"#546E7A",dark:"",elevation:1,height:"30px"}},[s("v-toolbar-title",{staticClass:"subtitle-2"},[t._v("Profile Setting")])],1),s("v-card-text",{staticClass:"py-2 mt-1"},[s("v-row",{attrs:{dense:"",justify:"center"}},[s("v-col",{attrs:{cols:"4"}},[s("v-row",{staticClass:"mb-1",attrs:{"no-gutters":""}},[s("v-col",{staticClass:"text-right pr-4",attrs:{cols:"4"}},[t._v("Name")]),s("v-col",{attrs:{cols:"8"}},[s("v-text-field",{attrs:{dense:"",outlined:"","hide-details":"",rules:[function(t){return!!t}]},model:{value:t.profile.name,callback:function(r){t.$set(t.profile,"name","string"===typeof r?r.trim():r)},expression:"profile.name"}})],1)],1),s("v-row",{staticClass:"mb-1",attrs:{"no-gutters":""}},[s("v-col",{staticClass:"text-right pr-4",attrs:{cols:"4"}},[t._v("Username")]),s("v-col",{attrs:{cols:"8"}},[s("v-text-field",{attrs:{dense:"",outlined:"","hide-details":"",rules:[function(t){return!!t}]},model:{value:t.profile.username,callback:function(r){t.$set(t.profile,"username","string"===typeof r?r.trim():r)},expression:"profile.username"}})],1)],1),s("v-row",{staticClass:"mb-1",attrs:{"no-gutters":""}},[s("v-col",{staticClass:"text-right pr-4",attrs:{cols:"4"}},[t._v("E-Mail")]),s("v-col",{attrs:{cols:"8"}},[s("v-text-field",{attrs:{dense:"",outlined:"","hide-details":""},model:{value:t.profile.email,callback:function(r){t.$set(t.profile,"email","string"===typeof r?r.trim():r)},expression:"profile.email"}})],1)],1),s("v-row",{staticClass:"mb-1",attrs:{"no-gutters":""}},[s("v-col",{staticClass:"text-right pr-4",attrs:{cols:"4"}},[t._v("Phone")]),s("v-col",{attrs:{cols:"8"}},[s("v-text-field",{attrs:{dense:"",outlined:"","hide-details":""},model:{value:t.profile.phone,callback:function(r){t.$set(t.profile,"phone","string"===typeof r?r.trim():r)},expression:"profile.phone"}})],1)],1)],1),s("v-col",{attrs:{cols:"5"}},[s("v-row",{staticClass:"mb-1",attrs:{"no-gutters":""}},[s("v-col",{staticClass:"text-right pr-4",attrs:{cols:"5"}},[t._v("Current Password")]),s("v-col",{attrs:{cols:"7"}},[s("v-text-field",{attrs:{dense:"",outlined:"","hide-details":"",type:"password"},model:{value:t.password.currentPassword,callback:function(r){t.$set(t.password,"currentPassword","string"===typeof r?r.trim():r)},expression:"password.currentPassword"}})],1)],1),s("v-row",{staticClass:"mb-1",attrs:{"no-gutters":""}},[s("v-col",{staticClass:"text-right pr-4",attrs:{cols:"5"}},[t._v("New Password")]),s("v-col",{attrs:{cols:"7"}},[s("v-text-field",{attrs:{dense:"",outlined:"","hide-details":"",type:"password"},model:{value:t.password.newPassword,callback:function(r){t.$set(t.password,"newPassword","string"===typeof r?r.trim():r)},expression:"password.newPassword"}})],1)],1),s("v-row",{staticClass:"mb-1",attrs:{"no-gutters":""}},[s("v-col",{staticClass:"text-right pr-4",attrs:{cols:"5"}},[t._v("Confirm Password")]),s("v-col",{attrs:{cols:"7"}},[s("v-text-field",{attrs:{dense:"",outlined:"","hide-details":"",type:"password"},model:{value:t.password.confirmPassword,callback:function(r){t.$set(t.password,"confirmPassword","string"===typeof r?r.trim():r)},expression:"password.confirmPassword"}})],1)],1),s("v-row",{attrs:{"no-gutters":""}},[s("v-col",{attrs:{cols:"5"}}),s("v-col",{attrs:{cols:"7"}},[s("v-row",{attrs:{"no-gutters":""}},[s("v-col",{staticClass:"pr-1",attrs:{cols:"6"}},[s("v-btn",{attrs:{type:"submit",loading:t.loading,height:"30px",dark:"",block:"",color:"light-blue darken-2"}},[t._v("Save")])],1),s("v-col",{attrs:{cols:"6"}},[s("v-btn",{attrs:{height:"30px",dark:"",block:"",color:"deep-orange"},on:{click:t.resetForm}},[t._v("Clear")])],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)},a=[],o=(s("d81d"),s("b64b"),s("5530")),n=(s("96cf"),s("1da1")),i={name:"ProfileSetting",data:function(){return{profile:{name:"",username:"",email:"",phone:""},password:{currentPassword:"",newPassword:"",confirmPassword:""},loading:!1,userId:null}},created:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var s,e;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s=JSON.parse(localStorage.getItem("userData")),t.userId=s.userId,r.next=4,t.$store.dispatch("user/getUsers",{id:t.userId});case 4:e=t.$store.getters["user/users"][0],Object.keys(t.profile).map((function(r){return t.profile[r]=e[r]}));case 6:case"end":return r.stop()}}),r)})))()},methods:{saveProfileSetting:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var s,e;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.$refs.profileSettingForm.validate()){r.next=2;break}return r.abrupt("return");case 2:if(!(""!=t.password.newPassword&&t.password.newPassword.length<6)){r.next=5;break}return t.$store.dispatch("snackbar/error","Password must be at least 6 characters long"),r.abrupt("return");case 5:if(!t.password.newPassword||""!=t.password.confirmPassword){r.next=8;break}return t.$store.dispatch("snackbar/error","Confirm password is required"),r.abrupt("return");case 8:if(t.password.newPassword==t.password.confirmPassword){r.next=11;break}return t.$store.dispatch("snackbar/error","New password & Confirm password didn't match"),r.abrupt("return");case 11:if(!t.password.newPassword||!t.password.confirmPassword||""!=t.password.currentPassword){r.next=14;break}return t.$store.dispatch("snackbar/error","Current password is required"),r.abrupt("return");case 14:return t.loading=!0,s=Object(o["a"])({},t.profile),s.id=t.userId,""!=t.password.confirmPassword&&(s.currentPassword=t.password.currentPassword,s.password=t.password.confirmPassword),r.next=20,t.$store.dispatch("user/userProfileUpdate",s);case 20:e=r.sent,e&&Object.keys(t.password).map((function(r){return t.password[r]=""})),t.loading=!1;case 23:case"end":return r.stop()}}),r)})))()},resetForm:function(){var t=this;Object.keys(this.profile).map((function(r){return t.profile[r]=""})),Object.keys(this.password).map((function(r){return t.password[r]=""})),this.$refs.profileSettingForm.resetValidation()}}},l=i,c=s("2877"),d=s("6544"),u=s.n(d),p=s("8336"),w=s("b0af"),f=s("99d9"),v=s("62ad"),m=s("a523"),b=s("4bd4"),g=s("0fd9"),h=s("8654"),x=s("71d9"),P=s("2a7f"),k=Object(c["a"])(l,e,a,!1,null,null,null);r["default"]=k.exports;u()(k,{VBtn:p["a"],VCard:w["a"],VCardText:f["b"],VCol:v["a"],VContainer:m["a"],VForm:b["a"],VRow:g["a"],VTextField:h["a"],VToolbar:x["a"],VToolbarTitle:P["a"]})}}]);
//# sourceMappingURL=profile-setting.0af57a30.js.map