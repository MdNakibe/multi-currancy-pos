(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["sale"],{"2c64":function(t,e,a){},"3d86":function(t,e,a){},"43a6":function(t,e,a){"use strict";a("a9e3");var s=a("5530"),o=(a("ec29"),a("3d86"),a("c37a")),i=a("604c"),r=a("8547"),l=a("58df"),n=Object(l["a"])(r["a"],i["a"],o["a"]);e["a"]=n.extend({name:"v-radio-group",provide:function(){return{radioGroup:this}},props:{column:{type:Boolean,default:!0},height:{type:[Number,String],default:"auto"},name:String,row:Boolean,value:null},computed:{classes:function(){return Object(s["a"])(Object(s["a"])({},o["a"].options.computed.classes.call(this)),{},{"v-input--selection-controls v-input--radio-group":!0,"v-input--radio-group--column":this.column&&!this.row,"v-input--radio-group--row":this.row})}},methods:{genDefaultSlot:function(){return this.$createElement("div",{staticClass:"v-input--radio-group__input",attrs:{id:this.id,role:"radiogroup","aria-labelledby":this.computedId}},o["a"].options.methods.genDefaultSlot.call(this))},genInputSlot:function(){var t=o["a"].options.methods.genInputSlot.call(this);return delete t.data.on.click,t},genLabel:function(){var t=o["a"].options.methods.genLabel.call(this);return t?(t.data.attrs.id=this.computedId,delete t.data.attrs.for,t.tag="legend",t):null},onClick:i["a"].options.methods.onClick}})},"4fa4":function(t,e,a){},"67b6":function(t,e,a){"use strict";a("b0c0");var s=a("5530"),o=(a("2c64"),a("ba87")),i=a("9d26"),r=a("c37a"),l=a("7e2b"),n=a("a9ad"),c=a("4e82"),u=a("5607"),d=a("2b0e"),p=d["a"].extend({name:"rippleable",directives:{ripple:u["a"]},props:{ripple:{type:[Boolean,Object],default:!0}},methods:{genRipple:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.ripple?(t.staticClass="v-input--selection-controls__ripple",t.directives=t.directives||[],t.directives.push({name:"ripple",value:{center:!0}}),this.$createElement("div",t)):null}}}),h=a("7560"),v=(a("4de4"),a("45fc"),a("d3b7"),a("25f0"),a("8547")),m=a("58df");function f(t){t.preventDefault()}var y=Object(m["a"])(r["a"],p,v["a"]).extend({name:"selectable",model:{prop:"inputValue",event:"change"},props:{id:String,inputValue:null,falseValue:null,trueValue:null,multiple:{type:Boolean,default:null},label:String},data:function(){return{hasColor:this.inputValue,lazyValue:this.inputValue}},computed:{computedColor:function(){if(this.isActive)return this.color?this.color:this.isDark&&!this.appIsDark?"white":"primary"},isMultiple:function(){return!0===this.multiple||null===this.multiple&&Array.isArray(this.internalValue)},isActive:function(){var t=this,e=this.value,a=this.internalValue;return this.isMultiple?!!Array.isArray(a)&&a.some((function(a){return t.valueComparator(a,e)})):void 0===this.trueValue||void 0===this.falseValue?e?this.valueComparator(e,a):Boolean(a):this.valueComparator(a,this.trueValue)},isDirty:function(){return this.isActive},rippleState:function(){return this.isDisabled||this.validationState?this.validationState:void 0}},watch:{inputValue:function(t){this.lazyValue=t,this.hasColor=t}},methods:{genLabel:function(){var t=r["a"].options.methods.genLabel.call(this);return t?(t.data.on={click:f},t):t},genInput:function(t,e){return this.$createElement("input",{attrs:Object.assign({"aria-checked":this.isActive.toString(),disabled:this.isDisabled,id:this.computedId,role:t,type:t},e),domProps:{value:this.value,checked:this.isActive},on:{blur:this.onBlur,change:this.onChange,focus:this.onFocus,keydown:this.onKeydown,click:f},ref:"input"})},onBlur:function(){this.isFocused=!1},onClick:function(t){this.onChange(),this.$emit("click",t)},onChange:function(){var t=this;if(this.isInteractive){var e=this.value,a=this.internalValue;if(this.isMultiple){Array.isArray(a)||(a=[]);var s=a.length;a=a.filter((function(a){return!t.valueComparator(a,e)})),a.length===s&&a.push(e)}else a=void 0!==this.trueValue&&void 0!==this.falseValue?this.valueComparator(a,this.trueValue)?this.falseValue:this.trueValue:e?this.valueComparator(a,e)?null:e:!a;this.validate(!0,a),this.internalValue=a,this.hasColor=a}},onFocus:function(){this.isFocused=!0},onKeydown:function(t){}}}),b=a("80d2"),_=a("d9f7"),g=Object(m["a"])(l["a"],n["a"],p,Object(c["a"])("radioGroup"),h["a"]);e["a"]=g.extend().extend({name:"v-radio",inheritAttrs:!1,props:{disabled:Boolean,id:String,label:String,name:String,offIcon:{type:String,default:"$radioOff"},onIcon:{type:String,default:"$radioOn"},readonly:Boolean,value:{default:null}},data:function(){return{isFocused:!1}},computed:{classes:function(){return Object(s["a"])(Object(s["a"])({"v-radio--is-disabled":this.isDisabled,"v-radio--is-focused":this.isFocused},this.themeClasses),this.groupClasses)},computedColor:function(){return y.options.computed.computedColor.call(this)},computedIcon:function(){return this.isActive?this.onIcon:this.offIcon},computedId:function(){return r["a"].options.computed.computedId.call(this)},hasLabel:r["a"].options.computed.hasLabel,hasState:function(){return(this.radioGroup||{}).hasState},isDisabled:function(){return this.disabled||!!this.radioGroup&&this.radioGroup.isDisabled},isReadonly:function(){return this.readonly||!!this.radioGroup&&this.radioGroup.isReadonly},computedName:function(){return this.name||!this.radioGroup?this.name:this.radioGroup.name||"radio-".concat(this.radioGroup._uid)},rippleState:function(){return y.options.computed.rippleState.call(this)},validationState:function(){return(this.radioGroup||{}).validationState||this.computedColor}},methods:{genInput:function(t){return y.options.methods.genInput.call(this,"radio",t)},genLabel:function(){return this.hasLabel?this.$createElement(o["a"],{on:{click:f},attrs:{for:this.computedId},props:{color:this.validationState,focused:this.hasState}},Object(b["t"])(this,"label")||this.label):null},genRadio:function(){return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.$createElement(i["a"],this.setTextColor(this.validationState,{props:{dense:this.radioGroup&&this.radioGroup.dense}}),this.computedIcon),this.genInput(Object(s["a"])({name:this.computedName,value:this.value},this.attrs$)),this.genRipple(this.setTextColor(this.rippleState))])},onFocus:function(t){this.isFocused=!0,this.$emit("focus",t)},onBlur:function(t){this.isFocused=!1,this.$emit("blur",t)},onChange:function(){this.isDisabled||this.isReadonly||this.isActive||this.toggle()},onKeydown:function(){}},render:function(t){var e={staticClass:"v-radio",class:this.classes,on:Object(_["c"])({click:this.onChange},this.listeners$)};return t("div",e,[this.genRadio(),this.genLabel()])}})},"8a79":function(t,e,a){"use strict";var s=a("23e7"),o=a("06cf").f,i=a("50c4"),r=a("5a34"),l=a("1d80"),n=a("ab13"),c=a("c430"),u="".endsWith,d=Math.min,p=n("endsWith"),h=!c&&!p&&!!function(){var t=o(String.prototype,"endsWith");return t&&!t.writable}();s({target:"String",proto:!0,forced:!h&&!p},{endsWith:function(t){var e=String(l(this));r(t);var a=arguments.length>1?arguments[1]:void 0,s=i(e.length),o=void 0===a?s:d(i(a),s),n=String(t);return u?u.call(e,n,o):e.slice(o-n.length,o)===n}})},"8b54":function(t,e,a){"use strict";var s=a("4fa4"),o=a.n(s);o.a},ec29:function(t,e,a){},f388:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("v-row",{staticClass:"pt-2",attrs:{"no-gutters":""}},[a("v-col",{attrs:{cols:"12"}},[a("v-form",{ref:"saleForm",staticClass:"custom-form",on:{submit:function(e){return e.preventDefault(),t.saveSale(e)}}},[a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"12",md:"9"}},[a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"5"}},[a("v-card",{attrs:{height:"100%",elevation:1,color:"white lighten-4"}},[a("v-toolbar",{attrs:{color:"white lighten-4",elevation:0,height:"40px"}},[a("v-toolbar-title",{staticClass:"subtitle-2"},[t._v("Customer Information")])],1),a("v-card-text",{staticClass:"py-1 pa-0 pl-2 pr-2"},[a("v-row",[a("v-col",{staticClass:"py-1 caption",attrs:{cols:"3"}},[t._v("Cust. Type")]),a("v-col",{staticClass:"py-0 pa-0 pl-3 pr-4",attrs:{cols:"9"}},[a("v-radio-group",{attrs:{row:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[a("v-radio",{attrs:{label:"Retail",value:"Retail"}}),a("v-radio",{attrs:{label:"Wholesale",value:"Wholesale"}})],1)],1)],1),a("v-row",[a("v-col",{staticClass:"py-1 caption",attrs:{cols:"3"}},[t._v("Customer")]),a("v-col",{staticClass:"py-0 pa-0 pl-3 pr-4",attrs:{cols:"8"}},[a("v-combobox",{attrs:{dense:"",outlined:"","hide-details":"",items:t.customers,loading:t.$store.getters["customer/loadingCustomers"],"item-text":"display_text","item-value":"id"},on:{focus:function(e){return t.$store.dispatch("customer/getCustomers",{type:t.type})}},model:{value:t.customer,callback:function(e){t.customer=e},expression:"customer"}})],1),a("v-col",{staticClass:"py-0 pl-2 pa-0",staticStyle:{"margin-left":"-17px"},attrs:{cols:"1"}},[a("v-btn",{attrs:{to:"/customer",target:"_blank",fab:"","x-small":"",depressed:"",color:"primary"}},[a("v-icon",{attrs:{color:"white"}},[t._v("mdi-plus")])],1)],1)],1),"G"==t.customer.type?a("v-row",{staticClass:"py-2"},[a("v-col",{staticClass:"py-1 caption",attrs:{cols:"3"}},[t._v("Name")]),a("v-col",{staticClass:"py-0",attrs:{cols:"9"}},[a("v-text-field",{attrs:{dense:"",outlined:"","hide-details":""},model:{value:t.customer.name,callback:function(e){t.$set(t.customer,"name",e)},expression:"customer.name"}})],1)],1):t._e(),a("v-row",[a("v-col",{staticClass:"py-1 caption",attrs:{cols:"3"}},[t._v("Phone")]),a("v-col",{staticClass:"py-0",attrs:{cols:"9"}},[a("v-text-field",{attrs:{dense:"",outlined:"","hide-details":"",readonly:"G"!=t.customer.type},model:{value:t.customer.phone,callback:function(e){t.$set(t.customer,"phone",e)},expression:"customer.phone"}})],1)],1),a("v-row",[a("v-col",{staticClass:"py-1 caption",attrs:{cols:"3"}},[t._v("Address")]),a("v-col",{staticClass:"py-0",attrs:{cols:"9"}},[a("v-textarea",{attrs:{dense:"",outlined:"","hide-details":"",height:"8vh",readonly:"G"!=t.customer.type},model:{value:t.customer.address,callback:function(e){t.$set(t.customer,"address",e)},expression:"customer.address"}})],1)],1)],1)],1)],1),a("v-col",{attrs:{cols:"5"}},[a("v-card",{attrs:{elevation:1,color:"white lighten-4"}},[a("v-toolbar",{attrs:{color:"white lighten-4",elevation:0,height:"40px"}},[a("v-toolbar-title",{staticClass:"subtitle-2"},[t._v("Product Information")])],1),a("v-card-text",{staticClass:"py-1 pa-0 pl-2 pr-2"},[a("v-form",{ref:"productForm",staticClass:"custom-form",on:{submit:function(e){return e.preventDefault(),t.addToCart(e)}}},[a("v-row",{staticClass:"py-2"},[a("v-col",{staticClass:"py-1 caption",attrs:{cols:"12"}},[t._v("Product")]),a("v-col",{staticClass:"py-0 pa-0 pl-3 pr-4",attrs:{cols:"11"}},[a("v-combobox",{ref:"product",attrs:{dense:"",outlined:"","hide-details":"",items:t.$store.getters["product/products"],loading:t.$store.getters["product/loadingProducts"],"item-text":"display_text","item-value":"id"},on:{focus:function(e){return t.$store.dispatch("product/getProducts")}},model:{value:t.product,callback:function(e){t.product=e},expression:"product"}})],1),a("v-col",{staticClass:"py-0 pa-0",staticStyle:{"margin-left":"-17px"},attrs:{cols:"1"}},[a("v-btn",{attrs:{to:"/product",target:"_blank",fab:"","x-small":"",depressed:"",color:"primary"}},[a("v-icon",{attrs:{color:"white"}},[t._v("mdi-plus")])],1)],1)],1),a("v-row",{staticClass:"py-2"},[a("v-col",{staticClass:"py-1 caption",attrs:{cols:"3"}},[t._v("Sale Rate")]),a("v-col",{staticClass:"py-0",attrs:{cols:"4"}},[a("v-text-field",{attrs:{dense:"",outlined:"","hide-details":"",type:"number",min:"0"},on:{input:t.productTotal},model:{value:t.product.sale_rate,callback:function(e){t.$set(t.product,"sale_rate",t._n(e))},expression:"product.sale_rate"}})],1),a("v-col",{staticClass:"py-0 pa-0",attrs:{cols:"2"}},[t._v("Quantity")]),a("v-col",{staticClass:"py-0 pa-0 pr-3",attrs:{cols:"3"}},[a("v-text-field",{ref:"quantity",attrs:{dense:"",outlined:"","hide-details":"",type:"number",min:"0"},on:{input:t.productTotal},model:{value:t.product.quantity,callback:function(e){t.$set(t.product,"quantity",t._n(e))},expression:"product.quantity"}})],1)],1),a("v-row",{staticClass:"py-2"},[a("v-col",{staticClass:"py-1 caption",attrs:{cols:"3"}},[t._v("Total")]),a("v-col",{staticClass:"py-0",attrs:{cols:"9"}},[a("v-text-field",{attrs:{dense:"",outlined:"","hide-details":"",type:"number",min:"0",readonly:""},model:{value:t.product.total,callback:function(e){t.$set(t.product,"total",e)},expression:"product.total"}})],1)],1),a("v-row",{staticClass:"py-2"},[a("v-col",{attrs:{cols:"9"}}),a("v-col",{staticClass:"py-0",attrs:{cols:"3"}},[a("v-btn",{attrs:{type:"submit",height:"35px",dark:"",color:"light-blue darken-2"}},[t._v("Add")])],1)],1)],1)],1)],1)],1),a("v-col",{attrs:{cols:"2"}},[a("v-card",{attrs:{elevation:1,color:"white lighten-4",height:"136"}},[a("v-toolbar",{attrs:{color:"white lighten-4",elevation:1,height:"40px"}},[a("v-toolbar-title",{staticClass:"subtitle-2"},[t._v("Product Stock")])],1),a("v-card-text",{staticClass:"py-1"},[a("div",{staticClass:"stock"},[t._v(" "+t._s(t.stock)+" "),""!=t.stock?a("span",[a("br"),t._v(" "+t._s(t.product.unit.name))]):t._e()])])],1)],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-card",{staticClass:"px-0",attrs:{elevation:1}},[a("v-toolbar",{attrs:{color:"white lighten-4",elevation:1,height:"40px"}},[a("v-toolbar-title",{staticClass:"subtitle-1"},[t._v("Cart Information")])],1),a("v-card-text",{staticClass:"py-3 px-1"},[a("v-simple-table",{attrs:{dense:""},scopedSlots:t._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",[t._v("SL")]),a("th",[t._v("Product Name")]),a("th",[t._v("Sale Rate")]),a("th",[t._v("Quantity")]),a("th",[t._v("Total")]),a("th",[t._v("Action")])])]),a("tbody",t._l(t.cart,(function(e,s){return a("tr",{key:s},[a("td",{staticClass:"text-center",staticStyle:{width:"5%"}},[t._v(t._s(s+1))]),a("td",[t._v(t._s(e.name))]),a("td",{staticClass:"text-right",staticStyle:{width:"12%"}},[t._v(t._s(e.sale_rate))]),a("td",{staticClass:"text-right",staticStyle:{width:"10%"}},[t._v(t._s(e.quantity))]),a("td",{staticClass:"text-right",staticStyle:{width:"10%"}},[t._v(t._s(e.total))]),a("td",{staticClass:"text-center",staticStyle:{width:"10%"}},[a("v-icon",{attrs:{small:"",color:"primary"},on:{click:function(e){return t.editCart(s)}}},[t._v("mdi-circle-edit-outline")]),a("v-icon",{attrs:{small:"",color:"error"},on:{click:function(e){return t.deleteCart(s)}}},[t._v("mdi-delete-circle-outline")])],1)])})),0)]},proxy:!0}])})],1)],1)],1)],1)],1),a("v-col",{attrs:{cols:"12",md:"3"}},[a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"12"}},[a("v-card",{attrs:{elevation:1,color:"white lighten-4"}},[a("v-toolbar",{attrs:{color:"white lighten-4",elevation:1,height:"40px"}},[a("v-toolbar-title",{staticClass:"subtitle-2"},[t._v("Invoice Information")])],1),a("v-card-text",{staticClass:"py-1 pa-0 pl-2 pr-2"},[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"py-1 caption",attrs:{cols:"4"}},[t._v("Invoice")]),a("v-col",{staticClass:"py-0",attrs:{cols:"8"}},[a("v-text-field",{attrs:{dense:"",outlined:"","hide-details":"",readonly:""},model:{value:t.sale.invoice,callback:function(e){t.$set(t.sale,"invoice",e)},expression:"sale.invoice"}})],1)],1),a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"py-1 caption",attrs:{cols:"4"}},[t._v("Date")]),a("v-col",{staticClass:"py-0",attrs:{cols:"8"}},[a("v-text-field",{attrs:{dense:"",outlined:"","hide-details":""},model:{value:t.sale.date,callback:function(e){t.$set(t.sale,"date",e)},expression:"sale.date"}})],1)],1),a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"py-1 caption",attrs:{cols:"4"}},[t._v("Employee")]),a("v-col",{staticClass:"py-0",attrs:{cols:"8"}},[a("v-combobox",{attrs:{dense:"",outlined:"","hide-details":"",items:t.$store.getters["employee/employees"],loading:t.$store.getters["employee/loadingEmployees"],"item-text":"display_text","item-value":"id"},on:{focus:function(e){return t.$store.dispatch("employee/getEmployees")}},model:{value:t.employee,callback:function(e){t.employee=e},expression:"employee"}})],1)],1),a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"py-1 caption",attrs:{cols:"4"}},[t._v("PO No")]),a("v-col",{staticClass:"py-0",attrs:{cols:"8"}},[a("v-text-field",{attrs:{dense:"",outlined:"","hide-details":""},model:{value:t.sale.po_no,callback:function(e){t.$set(t.sale,"po_no",e)},expression:"sale.po_no"}})],1)],1),a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"py-1 caption",attrs:{cols:"4"}},[t._v("PO Date")]),a("v-col",{staticClass:"py-0",attrs:{cols:"8"}},[a("v-text-field",{attrs:{dense:"",outlined:"","hide-details":""},model:{value:t.sale.po_date,callback:function(e){t.$set(t.sale,"po_date",e)},expression:"sale.po_date"}})],1)],1),a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"py-1 caption",attrs:{cols:"4"}},[t._v("Sub Total")]),a("v-col",{staticClass:"py-0",attrs:{cols:"8"}},[a("v-text-field",{attrs:{dense:"",outlined:"","hide-details":"",type:"number",min:"0",readonly:""},model:{value:t.sale.sub_total,callback:function(e){t.$set(t.sale,"sub_total",e)},expression:"sale.sub_total"}})],1)],1),a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"py-1 caption",attrs:{cols:"4"}},[t._v("Vat")]),a("v-col",{staticClass:"py-0",attrs:{cols:"3"}},[a("v-text-field",{attrs:{dense:"",outlined:"","hide-details":"",type:"number",min:"0",id:"vat"},on:{input:t.calculateTotal},model:{value:t.vatPercent,callback:function(e){t.vatPercent=t._n(e)},expression:"vatPercent"}})],1),a("v-col",{attrs:{cols:"1"}},[a("span",{staticClass:"ml-1"},[t._v("%")])]),a("v-col",{staticClass:"py-0",attrs:{cols:"4"}},[a("v-text-field",{attrs:{dense:"",outlined:"","hide-details":"",type:"number",min:"0"},on:{input:t.calculateTotal},model:{value:t.sale.vat,callback:function(e){t.$set(t.sale,"vat",t._n(e))},expression:"sale.vat"}})],1)],1),a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"py-1 caption",attrs:{cols:"4"}},[t._v("Discount")]),a("v-col",{staticClass:"py-0",attrs:{cols:"3"}},[a("v-text-field",{attrs:{dense:"",outlined:"","hide-details":"",type:"number",min:"0",id:"discount"},on:{input:t.calculateTotal},model:{value:t.disPercent,callback:function(e){t.disPercent=t._n(e)},expression:"disPercent"}})],1),a("v-col",{staticClass:"py-0",attrs:{cols:"1"}},[a("span",{staticClass:"ml-1"},[t._v("%")])]),a("v-col",{staticClass:"py-0",attrs:{cols:"4"}},[a("v-text-field",{attrs:{dense:"",outlined:"","hide-details":"",type:"number",min:"0"},on:{input:t.calculateTotal},model:{value:t.sale.discount,callback:function(e){t.$set(t.sale,"discount",t._n(e))},expression:"sale.discount"}})],1)],1),a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"py-1 caption",attrs:{cols:"4"}},[t._v("Transport")]),a("v-col",{staticClass:"py-0",attrs:{cols:"8"}},[a("v-text-field",{attrs:{dense:"",outlined:"","hide-details":"",type:"number",min:"0"},on:{input:t.calculateTotal},model:{value:t.sale.transport,callback:function(e){t.$set(t.sale,"transport",t._n(e))},expression:"sale.transport"}})],1)],1),a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"py-1 caption",attrs:{cols:"4"}},[t._v("Total")]),a("v-col",{staticClass:"py-0",attrs:{cols:"8"}},[a("v-text-field",{attrs:{dense:"",outlined:"","hide-details":"",type:"number",min:"0",readonly:""},on:{input:t.calculateTotal},model:{value:t.sale.total,callback:function(e){t.$set(t.sale,"total",t._n(e))},expression:"sale.total"}})],1)],1),a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"py-1 caption",attrs:{cols:"4"}},[t._v("Paid")]),a("v-col",{staticClass:"py-0",attrs:{cols:"8"}},[a("v-text-field",{attrs:{dense:"",outlined:"","hide-details":"",type:"number",min:"0",readonly:"G"==t.customer.type},on:{input:t.calculateTotal},model:{value:t.sale.paid,callback:function(e){t.$set(t.sale,"paid",t._n(e))},expression:"sale.paid"}})],1)],1),a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"py-1 caption",attrs:{cols:"4"}},[t._v("Due")]),a("v-col",{staticClass:"py-0",attrs:{cols:"4"}},[a("v-text-field",{attrs:{dense:"",outlined:"","hide-details":"",readonly:""},on:{input:t.calculateTotal},model:{value:t.sale.due,callback:function(e){t.$set(t.sale,"due",t._n(e))},expression:"sale.due"}})],1),a("v-col",{staticClass:"pl-2",attrs:{cols:"4"}},[a("v-text-field",{attrs:{dense:"",outlined:"","hide-details":"",readonly:""}})],1)],1),a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"py-1",attrs:{cols:"4"}}),a("v-col",{staticClass:"py-1",attrs:{cols:"4"}},[a("v-btn",{attrs:{type:"submit",height:"30px",dark:"",block:"",color:"light-blue darken-2",loading:t.loadingForSave}},[t._v("Save")])],1),a("v-col",{staticClass:"pl-2 py-1",attrs:{cols:"4"}},[a("v-btn",{attrs:{type:"reset",height:"30px",dark:"",block:"",color:"deep-orange"},on:{click:t.resetForm}},[t._v("Clear")])],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)},o=[],i=(a("99af"),a("c740"),a("4160"),a("d81d"),a("13d5"),a("a434"),a("b0c0"),a("b680"),a("b64b"),a("159b"),a("96cf"),a("1da1")),r=a("ade3"),l=a("1940"),n=a.n(l),c={name:"Sale",data:function(){var t;return{type:"Retail",sale:{id:null,invoice:"",date:(new Date).toISOString().substr(0,10),customer_id:null,employee_id:null,po_no:"",po_date:(new Date).toISOString().substr(0,10),sub_total:0,vat:0,discount:0,transport:0,total:0,paid:0,due:0},vatPercent:0,disPercent:0,customer:{id:null,name:"",phone:"",address:"",type:"",display_text:"Select Customer"},employee:null,product:(t={id:"",code:"",display_text:"Select product",name:"",sale_rate:""},Object(r["a"])(t,"sale_rate",""),Object(r["a"])(t,"quantity",""),Object(r["a"])(t,"total",""),Object(r["a"])(t,"unit",{}),t),cart:[],editCartIndex:null,modal:!1,loadingForSave:!1,stock:""}},watch:{customer:function(t){void 0!=t&&(this.sale.customer_id=t.id,this.customer=t,this.calculateTotal())},product:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(void 0!=t){a.next=2;break}return a.abrupt("return");case 2:if(e.product=t,e.product.sale_rate="Wholesale"==e.type?t.wholesale_rate:t.sale_rate,""==t.id){a.next=11;break}return e.$refs.quantity.focus(),a.next=8,e.$store.dispatch("product/getCurrentStock",{productId:t.id});case 8:return a.next=10,e.$store.getters["product/stock"][0].current_quantity;case 10:e.stock=a.sent;case 11:case"end":return a.stop()}}),a)})))()},employee:function(t){void 0!=t&&(this.sale.employee_id=t.id)}},computed:{customers:function(){var t=this.$store.getters["customer/customers"];return t.unshift({id:null,display_text:"General Customer",type:"G",name:"",phone:"",address:""}),t}},created:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("sale/generateSaleCode");case 2:if(t.sale.invoice=e.sent,void 0==t.$route.params.id){e.next=8;break}return e.next=6,t.$store.dispatch("sale/getSales",{id:t.$route.params.id});case 6:return e.next=8,t.getSales();case 8:case"end":return e.stop()}}),e)})))()},methods:{productTotal:function(){this.product.sale_rate=null==this.product.sale_rate||""==this.product.sale_rate?0:this.product.sale_rate,this.product.quantity=null==this.product.quantity||""==this.product.quantity?0:this.product.quantity,this.product.total=(+this.product.sale_rate*+this.product.quantity).toFixed(2)},addToCart:function(){var t=this;if(this.$refs.productForm.validate())if(""!=this.product.id&&null!=this.product.id)if(0!=this.product.sale_rate&&""!=this.product.sale_rate&&null!=this.product.sale_rate)if(0!=this.product.quantity&&""!=this.product.quantity&&null!=this.product.quantity)if(+this.product.quantity>+this.stock)this.$store.dispatch("snackbar/error","Product stock is insufficient");else{var e={id:this.product.id,code:this.product.code,name:this.product.name,purchase_rate:this.product.purchase_rate,sale_rate:this.product.sale_rate,quantity:this.product.quantity,total:this.product.total,display_text:this.product.display_text};if(null!=this.editCartIndex){var a=this.cart[this.editCartIndex],s=this.cart.findIndex((function(t){return t.id==e.id&&t.id!=a.id}));if(s>-1)return void this.$store.dispatch("snackbar/error","Product already existed in cart");this.cart[this.editCartIndex]=e}else{var o=this.cart.findIndex((function(e){return e.id==t.product.id}));if(o>-1)return void this.$store.dispatch("snackbar/error","Product already existed in cart");this.cart.unshift(e)}this.calculateTotal(),this.clearProduct(),this.$refs.product.focus()}else this.$store.dispatch("snackbar/error","sale quantity is required");else this.$store.dispatch("snackbar/error","sale rate is required");else this.$store.dispatch("snackbar/error","Select a product")},editCart:function(t){var e=this.cart[t];this.product=e,this.editCartIndex=t},deleteCart:function(t){this.cart.splice(t,1),this.calculateTotal()},calculateTotal:function(){this.sale.sub_total=this.cart.reduce((function(t,e){return+t+ +e.total}),0).toFixed(2),"vat"==event.target.id?this.sale.vat=(+this.sale.sub_total*+this.vatPercent/100).toFixed(2):this.vatPercent=(+this.sale.vat/+this.sale.sub_total*100).toFixed(2),"discount"==event.target.id?this.sale.discount=(+this.sale.sub_total*+this.disPercent/100).toFixed(2):this.disPercent=(+this.sale.discount/+this.sale.sub_total*100).toFixed(2),this.sale.total=(+this.sale.sub_total+ +this.sale.vat+ +this.sale.transport-+this.sale.discount).toFixed(2),"G"==this.customer.type?this.sale.paid=this.sale.total:this.sale.due=(+this.sale.total-+this.sale.paid).toFixed(2)},clearProduct:function(){var t;this.product=(t={id:"",display_text:"",name:"",sale_rate:""},Object(r["a"])(t,"sale_rate",""),Object(r["a"])(t,"quantity",""),Object(r["a"])(t,"total",""),Object(r["a"])(t,"unit",{}),t),this.editCartIndex=null,this.stock="",this.$refs.productForm.resetValidation()},validateSale:function(){var t=!0;if(this.$refs.saleForm.validate(),this.$refs.saleForm.inputs.forEach((function(e){e.hasError&&(t=!1)})),t)return""==this.customer.type&&null==this.sale.customer_id?(this.$store.dispatch("snackbar/error","Select a customer"),t=!1,t):0==this.cart.length?(this.$store.dispatch("snackbar/error","Cart is empty"),t=!1,t):null==this.sale.employee_id?(this.$store.dispatch("snackbar/error","Select an employee"),t=!1,t):t},saveSale:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.validateSale()){e.next=2;break}return e.abrupt("return");case 2:return a={sale:t.sale,cart:t.cart,customer:"G"==t.customer.type?t.customer:null},t.loadingForSave=!0,e.next=6,t.$store.dispatch("sale/saveSale",a);case 6:s=e.sent,s&&(t.resetForm(),s.isSuccess&&(t.resetForm(),n()({title:"Sale success! Do you want to show invoice ?",icon:"success",buttons:!0}).then((function(e){e&&t.$router.push("/sale-invoice/".concat(s.id))})))),t.loadingForSave=!1;case 9:case"end":return e.stop()}}),e)})))()},resetForm:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.cart=[],Object.keys(t.sale).map((function(e){return t.sale[e]=""})),t.$refs.saleForm.resetValidation(),t.sale.id=null,t.customer=null,t.sale.date=(new Date).toISOString().substr(0,10),t.sale.po_date=(new Date).toISOString().substr(0,10),e.next=9,t.$store.dispatch("sale/generateSaleCode");case 9:t.sale.invoice=e.sent;case 10:case"end":return e.stop()}}),e)})))()},getSales:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.getters["sale/sales"][0];case 2:a=e.sent,t.sale.id=a.id,t.sale.invoice=a.invoice,t.sale.date=a.date,t.sale.customer_id=a.customer_id,t.sale.po_no=a.po_no,t.sale.po_date=a.po_date,t.sale.po_date=a.po_date,t.sale.sub_total=a.sub_total,t.sale.vat=a.vat,t.sale.discount=a.discount,t.sale.transport=a.transport,t.sale.total=a.total,t.sale.paid=a.paid,t.sale.due=a.due,t.customer=null===a||void 0===a?void 0:a.customer,t.customer.display_text="".concat(null===a||void 0===a?void 0:a.customer.code," - ").concat(null==(null===a||void 0===a?void 0:a.customer.name)?"":null===a||void 0===a?void 0:a.customer.name," - ").concat(null==(null===a||void 0===a?void 0:a.customer.phone)?"":null===a||void 0===a?void 0:a.customer.phone),t.employee=null===a||void 0===a?void 0:a.employee,t.employee.display_text="".concat(null===a||void 0===a?void 0:a.employee.emp_id," - ").concat(null===a||void 0===a?void 0:a.employee.name),null===a||void 0===a||a.sale_details.forEach((function(e){t.cart.unshift({id:e.product.id,code:e.product.code,name:e.product.name,purchase_rate:e.purchase_rate,sale_rate:e.sale_rate,quantity:e.quantity,total:e.total,display_text:"".concat(e.product.code," - ").concat(e.product.name)})}));case 22:case"end":return e.stop()}}),e)})))()}}},u=c,d=(a("8b54"),a("2877")),p=a("6544"),h=a.n(p),v=a("8336"),m=a("b0af"),f=a("99d9"),y=a("62ad"),b=a("2b5d"),_=a("a523"),g=a("4bd4"),C=a("132d"),x=a("67b6"),w=a("43a6"),k=a("0fd9"),S=a("1f4f"),$=a("8654"),I=a("a844"),V=a("71d9"),O=a("2a7f"),F=Object(d["a"])(u,s,o,!1,null,"b5f0a7aa",null);e["default"]=F.exports;h()(F,{VBtn:v["a"],VCard:m["a"],VCardText:f["b"],VCol:y["a"],VCombobox:b["a"],VContainer:_["a"],VForm:g["a"],VIcon:C["a"],VRadio:x["a"],VRadioGroup:w["a"],VRow:k["a"],VSimpleTable:S["a"],VTextField:$["a"],VTextarea:I["a"],VToolbar:V["a"],VToolbarTitle:O["a"]})}}]);
//# sourceMappingURL=sale.59f23948.js.map